(()=>{"use strict";var t={594:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n,o=s(e(19)),a=s(e(884));!function(t){t[t.Susceptible=0]="Susceptible",t[t.Infectious=1]="Infectious",t[t.Recovered=2]="Recovered",t[t.Removed=3]="Removed"}(n||(n={}));var h=function(){function t(t,i,e,s,n,h,r){this.speed=.2,this.infectionDuration=0,this.infectionCount=0,this.color="#ffffff",this.rainbowArray=this.makeRainBowArray(),this.radius=r,this.infection=s,this.location=t,this.bounds=i,this.id=e,this.state=n,this.startSeperationAtDistance=h,this.direction=new o.default((a.default.random()-.5)*this.speed,(a.default.random()-.5)*this.speed)}return t.prototype.updateInfection=function(){this.state==n.Infectious&&this.infectionDuration++,this.state==n.Recovered&&this.infectionDuration++,this.infectionDuration>this.infection.duration&&(this.state=n.Recovered),this.infectionDuration>2*this.infection.duration&&(this.state=n.Susceptible,this.infectionCount++,this.infectionDuration=0)},t.prototype.infect=function(){this.state=n.Infectious},t.prototype.separate=function(t){this.overlap=!1;for(var i=this.startSeperationAtDistance,e=0;e<t.length;e++)if(this.id!=t[e].id){var s=this.location.distance(t[e].location);if(s<this.radius+t[e].infection.transmittability&&this.state==n.Susceptible&&t[e].state==n.Infectious&&(this.state=n.Infectious,this.infectionCount<t[e].infectionCount&&(this.infectionCount=t[e].infectionCount)),s<=i){var a=(i-s)/i,h=new o.default(this.location.x-t[e].location.x,this.location.y-t[e].location.y);h.setMagnitude(a),this.direction=this.direction.add(h)}}this.direction.setMaxMagnitude(1)},t.prototype.updateLocation=function(){var t=2*this.startSeperationAtDistance;this.location.x<=t&&(this.direction.x=this.direction.x+(t-this.location.x)/t/4),this.location.x>=this.bounds.x-t&&(this.direction.x=this.direction.x+(this.bounds.x-t-this.location.x)/t/4),this.location.y<=t&&(this.direction.y=this.direction.y+(t-this.location.y)/t/4),this.location.y>=this.bounds.y-t&&(this.direction.y=this.direction.y+(this.bounds.y-t-this.location.y)/t/4),this.location.x=this.location.x+this.direction.x,this.location.y=this.location.y+this.direction.y,this.direction.x=this.direction.x+67e-7*(this.bounds.x/2-this.location.x),this.direction.y=this.direction.y+67e-7*(this.bounds.y/2-this.location.y),this.location.x<=0&&(this.location.x=0,this.direction.x=this.direction.x+.1),this.location.y<=0&&(this.location.y=0,this.direction.y=this.direction.y+.1),this.location.x>=this.bounds.x&&(this.location.x=this.bounds.x,this.direction.x=this.direction.x-.1),this.location.y>=this.bounds.y&&(this.location.y=this.bounds.y,this.direction.y=this.direction.y-.1)},t.prototype.cycle=function(t,i){this.updateInfection(),this.separate(i),this.updateLocation(),this.render(t)},t.prototype.render=function(t){if(t.strokeStyle="rgba(0,0,0,0)",t.lineWidth=2,this.overlap&&(t.strokeStyle="rgba(0,0,0,1)"),this.state==n.Infectious){t.beginPath();var i=this.infection.transmittability-this.radius;i*=Math.sin(this.infectionDuration/this.infection.duration*Math.PI),t.arc(this.location.x,this.location.y,this.radius+i,0,2*Math.PI),t.fillStyle="rgba(0,0,0,0.2)",t.fill()}t.beginPath(),t.arc(this.location.x,this.location.y,this.radius,0,2*Math.PI),t.stroke();var e="#ffffff";this.state==n.Infectious?e=this.rainbowArray[this.infectionCount%12]:this.state==n.Recovered?e="#aaaaaa":this.state==n.Susceptible&&(e="#ffffff"),this.color=this.blendColors(e,this.color,.97),t.fillStyle=this.color,t.fill()},t.prototype.blendColors=function(t,i,e){var s=t.match(/\w\w/g).map((function(t){return parseInt(t,16)})),n=s[0],o=s[1],a=s[2],h=i.match(/\w\w/g).map((function(t){return parseInt(t,16)})),r=h[0],c=h[1],u=h[2];return"#"+Math.round(n+(r-n)*e).toString(16).padStart(2,"0")+Math.round(o+(c-o)*e).toString(16).padStart(2,"0")+Math.round(a+(u-a)*e).toString(16).padStart(2,"0")},t.prototype.makeRainBowArray=function(){for(var t=new Array(12),i=0;i<12;i++){var e=o(i,0*Math.PI*2/3),s=o(i,1*Math.PI*2/3),n=o(i,2*Math.PI*2/3);t[i]="#"+e+n+s}function o(t,i){var e=Math.sin(Math.PI/12*2*t+i),s=(Math.floor(127*e)+128).toString(16);return 1===s.length?"0"+s:s}return t},t}();i.default=h},252:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0});i.default=function(t,i,e,s){this.duration=t,this.mortality=i,this.contagiousness=e,this.transmittability=s}},486:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0});i.default=function(t){this.world=t}},721:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t,i){this.gridSize=i,this.hashTable=[],this.horizontal=Math.ceil(t.x/i),this.vertical=Math.ceil(t.y/i);for(var e=0;e<=this.vertical;e++){this.hashTable.push([]);for(var s=0;s<=this.horizontal;s++)this.hashTable[e].push([])}}return t.prototype.clear=function(){for(var t=0;t<this.vertical;t++)for(var i=0;i<this.horizontal;i++)this.hashTable[t][i]=[]},t.prototype.insert=function(t){var i=Math.floor(t.location.x/this.gridSize),e=Math.floor(t.location.y/this.gridSize);i<this.horizontal&&e<this.vertical&&this.hashTable[e][i].push(t)},t.prototype.getNeighbours=function(t){return[].concat.apply([],this.neighbors(Math.floor(t.location.y/this.gridSize),Math.floor(t.location.x/this.gridSize)))},t.prototype.neighbors=function(t,i){var e=this;return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,0],[0,1],[1,-1],[1,0],[1,1]].filter((function(s){var n=s[0],o=s[1];return n+t>=0&&n+t<e.hashTable.length&&o+i>=0&&o+i<e.hashTable[0].length})).map((function(s){var n=s[0],o=s[1];return e.hashTable[n+t][o+i]}))},t}();i.default=e},884:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t.random=function(){return this.seed=16807*this.seed%2147483647,(this.seed-1)/2147483646},t.randomBetween=function(t,i){return Math.floor(this.random()*(i-t+1)+t)},t.seed=123456,t}();i.default=e},19:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t,i,e){void 0===t&&(t=1),void 0===i&&(i=1),void 0===e&&(e=[]),this.x=t,this.y=i,this.userData=e}return t.prototype.distance=function(t){return Math.hypot(this.x-t.x,this.y-t.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.substract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.getDirection=function(){return Math.atan2(this.y,this.x)},t.prototype.getMagnitude=function(){return Math.hypot(this.x,this.y)},t.prototype.setMagnitude=function(t){var i=this.getDirection();this.x=Math.cos(i)*t,this.y=Math.sin(i)*t},t.prototype.setMaxMagnitude=function(t){this.getMagnitude()>t&&this.setMagnitude(t)},t.prototype.sqDistanceFrom=function(t){var i=t.x-this.x,e=t.y-this.y;return i*i+e*e},t.prototype.distanceFrom=function(t){return Math.sqrt(this.sqDistanceFrom(t))},t}();i.default=e},406:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(e(884)),o=s(e(19)),a=s(e(594)),h=s(e(721)),r=function(){function t(t,i,e,s,n,o,a){this.boids=[],this.time=0,this.times=[],this._temp_useSpacialHash=!0,this._temp_showFTP=!0,this.width=t,this.height=i,this.density=e,this.startSeperationAtDistance=o,this.infection=n,this.infections=s,this.boidRadius=a,this.canvas=document.createElement("canvas"),this.canvas.id="world",this.canvas.setAttribute("width",this.width.toString()),this.canvas.setAttribute("height",this.height.toString()),document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.init(this.density,this.startSeperationAtDistance,this.boidRadius),this.cycle()}return t.prototype.init=function(t,i,e){var s;s=this.infection.transmittability>i?this.infection.transmittability:i,this.spacialHash=new h.default(new o.default(this.width,this.height),s),this.boidRadius=e,this.boids=[],this.density=t,this.startSeperationAtDistance=i,this.initialBoids=this.density;for(var r=0;r<this.initialBoids;r++){var c,u=new o.default(n.default.randomBetween(0,this.width),n.default.randomBetween(0,this.height)),d=new o.default(this.width,this.height);c=r<this.infections?1:0;var l=new a.default(u,d,r,this.infection,c,this.startSeperationAtDistance,this.boidRadius);this.boids.push(l)}},t.prototype.resetDensity=function(t){this.init(t,this.startSeperationAtDistance,this.boidRadius)},t.prototype.resetSeperation=function(t){this.init(this.density,t,this.boidRadius)},t.prototype.resetRadius=function(t){this.init(this.density,this.startSeperationAtDistance,t)},t.prototype.updateSpacialHash=function(){this.spacialHash.clear();for(var t=0;t<this.boids.length;t++)this.spacialHash.insert(this.boids[t])},t.prototype.fps=function(){for(var t=performance.now();this.times.length>0&&this.times[0]<=t-1e3;)this.times.shift();this.times.push(t)},t.prototype.cycle=function(){var t=this;this.fps(),this.updateSpacialHash(),this.render(),window.requestAnimationFrame((function(){return t.cycle()}))},t.prototype.render=function(){this.ctx.fillStyle="rgba(120,120,120,1)",this.ctx.fillRect(0,0,this.width,this.height);for(var t=0,i=this.boids;t<i.length;t++){var e=i[t];this._temp_useSpacialHash?e.cycle(this.ctx,this.spacialHash.getNeighbours(e)):e.cycle(this.ctx,this.boids)}this._temp_showFTP&&(this.ctx.font="15px Arial",this.ctx.fillStyle="rgba(0,0,0,1)",this.ctx.fillRect(20,20,50,25),this.ctx.fillStyle="white",this.ctx.fillText(this.times.length.toString()+"fps",27,36))},t}();i.default=r},519:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(e(486)),o=s(e(406)),a=s(e(252));console.log("start");var h=new a.default(110,.5,.5,16),r=new o.default(800,800,700,1,h,12,5);new n.default(r)}},i={};!function e(s){var n=i[s];if(void 0!==n)return n.exports;var o=i[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}(519)})();